"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lodash_1 = require("lodash");
const utils_1 = require("../utils");
const guards_1 = require("./guards");
function getSecurities(document, operationSecurity) {
    var _a;
    const opSchemesPairs = operationSecurity ? utils_1.mapToKeys(operationSecurity) : utils_1.mapToKeys(document.security);
    const definitions = (_a = document.components) === null || _a === void 0 ? void 0 : _a.securitySchemes;
    if (!lodash_1.isObject(definitions))
        return [];
    return opSchemesPairs.map(opSchemePair => opSchemePair
        .map(opScheme => {
        return Object.assign(Object.assign({}, definitions[opScheme]), { key: opScheme });
    })
        .filter(guards_1.isSecuritySchemeWithKey));
}
exports.getSecurities = getSecurities;
//# sourceMappingURL=accessors.js.map