"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t,r=require("@stoplight/react-error-boundary"),n=require("@stoplight/tree-list"),s=(e=require("classnames"))&&"object"==typeof e&&"default"in e?e.default:e,i=require("mobx"),a=require("react"),o=require("@stoplight/json"),l=require("lodash"),c=require("mobx-react-lite"),d=require("@stoplight/ui-kit"),p=require("@stoplight/markdown-viewer");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function m(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}class h extends ReferenceError{constructor(){super(...arguments),this.name="ResolvingError"}}(t=exports.SchemaKind||(exports.SchemaKind={})).Any="any",t.String="string",t.Number="number",t.Integer="integer",t.Boolean="boolean",t.Null="null",t.Array="array",t.Object="object";const f=e=>"type"in e&&"items"in e&&e.type===exports.SchemaKind.Array&&l.isObjectLike(e.items),y=e=>"$ref"in e,g=e=>f(e)&&"$ref"in e.items,x=e=>"combiner"in e,v=new WeakMap,b=e=>{const t=v.get(e);if(void 0===t)throw new Error("Missing metadata");return t},O=e=>{const t=b(e);if(!("schema"in t))throw new TypeError("Schema node expected");return t},E=e=>"allOf"in e?"allOf":"anyOf"in e?"anyOf":"oneOf"in e?"oneOf":void 0;function S(e){return"type"in e?e.type:"properties"in e?exports.SchemaKind.Object:"items"in e?exports.SchemaKind.Array:void 0}function w(e){if("type"in e&&void 0!==e.type){if(Array.isArray(e.type)){if(e.type.includes(exports.SchemaKind.Object))return exports.SchemaKind.Object;if(e.type.includes(exports.SchemaKind.Array))return exports.SchemaKind.Array}return e.type}return S(e)}const j=()=>Math.random().toString(36);function N(e,t){const{path:r}=O(e),n={id:j(),name:"",parent:e};return v.set(n,{path:r,error:t}),n}const A=require("@stoplight/json-schema-merge-allof"),k=new WeakMap;const R=(e,t,r)=>{try{return k.has(r)||k.set(r,new WeakMap),function e(t,r,n){return A(t,{deep:!1,resolvers:A.stoplightResolvers,$refResolver(s){if("string"!=typeof s)return{};if(o.pathToPointer(r).startsWith(s))throw new h("Circular reference detected");const i=k.get(n),a=i.get(t);if(void 0===a)i.set(t,[s]);else{if(a.includes(s)){const t=JSON.parse(o.safeStringify(n.resolveRef(null,s)));return"allOf"in t?e(t,r,n):t}a.push(s)}return n.resolveRef(null,s)}})}(e,t,r)}catch(e){throw console.error(e.message),e}},$=e=>"string"==typeof e&&Object.values(exports.SchemaKind).includes(e);function T(e){if(Object.keys(e).length>1||!("type"in e))throw new Error('The "type" property must be a string, or an array of strings. Objects and array of objects are not valid.');if("type"in e&&$(e.type))return e.type}function P(e){return"string"==typeof e?e:"object"==typeof e&&null!==e?T(e):void 0}const K=e=>{if("string"==typeof e&&$(e))return e;if("object"==typeof e&&null!==e){if(Array.isArray(e)){const t=[];for(const r of e){const e=P(r);$(e)&&!t.includes(e)&&t.push(e)}return t.length>0?t:void 0}return T(e)}},D=["description","default","examples"];function q(e){return l.pick(e,D)}const F=["enum","format","default","example","nullable","discriminator","readOnly","writeOnly","xml","externalDocs"],I={string:["minLength","maxLength","pattern"],number:["multipleOf","minimum","exclusiveMinimum","maximum","exclusiveMaximum"],get integer(){return this.number},object:["additionalProperties","minProperties","maxProperties"],array:["additionalItems","minItems","maxItems","uniqueItems"]};function L(e){return Array.isArray(e)?l.flatMap(e,L):I[e]||[]}const C=e=>{const t=e.type&&L(e.type),r=function(e){return"x-deprecated"in e?!!e["x-deprecated"]:"deprecated"in e?!!e.deprecated:void 0}(e);return Object.assign(Object.assign(Object.assign({},l.pick(e,F)),t&&l.pick(e,t)),void 0!==r&&{deprecated:r})},M=e=>{if(Array.isArray(e))return e.filter(e=>"string"==typeof e||"number"==typeof e).map(String)};function J(e){const t=E(e),r=e.type||S(e),n="string"==typeof e.title?{title:e.title}:null;if(t){const s=e[t];return Object.assign(Object.assign({id:j(),combiner:t,properties:Array.isArray(s)?s.slice():s,annotations:q(e)},void 0!==r&&{type:r}),n)}if(r){const t=Object.assign(Object.assign(Object.assign({id:j(),type:K(r),validations:C(e),annotations:q(e)},"required"in e&&{required:M(e.required)}),{enum:e.enum}),n);return function(e,t){switch(w(t)){case exports.SchemaKind.Array:e.items=V(t.items),e.additionalItems="boolean"==typeof t.additionalItems?t.additionalItems:V(t.additionalItems);break;case exports.SchemaKind.Object:e.properties=G(t.properties),e.patternProperties=G(t.patternProperties),e.additionalProperties="boolean"==typeof t.additionalProperties?t.additionalProperties:G(t.additionalProperties)}}(t,e),t}return"enum"in e?Object.assign({id:j(),validations:C(e),annotations:q(e),enum:e.enum},n):"$ref"in e?Object.assign({id:j(),$ref:"string"!=typeof e.$ref?null:e.$ref},n):{id:j(),validations:{},annotations:{}}}function V(e){return l.isObject(e)?e:void 0}function G(e){return l.isObject(e)&&!Array.isArray(e)?e:void 0}const W=(e,t,r,n,s)=>{var i;const a=Q(e,t,n,s);if(l.isObject(a))for(const{node:e,fragment:o}of function*e(t){if(Array.isArray(t))for(const r of t)yield*e(r);else{const e=J(t);void 0!==e&&(yield{node:e,fragment:t})}}(a)){if(null!==s&&void 0!==s.onNode&&!s.onNode(o,e,t,r))continue;const a={id:e.id,name:"",parent:t};if(t.children.push(a),v.set(a,{schemaNode:e,schema:o,path:n}),y(e)&&null!==e.$ref)U(a,e,r,n,s);else if(x(e)){if("allOf"===e.combiner&&(null===(i=s)||void 0===i?void 0:i.mergeAllOf))try{const e=R(o,n,s);t.children.pop(),W(e,t,r,n,s)}catch(e){Array.isArray(o.allOf)&&(a.children=[],H(a,o,r+1,[...n,"allOf"],s))}else if(l.isObject(e.properties)){a.children=[];for(const[t,i]of e.properties.entries())"type"in e&&(e.properties[t]=Object.assign(Object.assign({},i),{type:i.type||e.type})),W(e.properties[t],a,r+1,[...n,e.combiner,t],s)}}else switch(w(e)){case exports.SchemaKind.Array:z(a,e,r,n,s);break;case exports.SchemaKind.Object:B(a,e,r,n,s)}}};function z(e,t,r,n,s){const i=Q(t.items,e,n,s);if(!l.isObject(i))return e;if(i!==t.items){const t=b(e);"schemaNode"in t&&(t.schemaNode.items=i)}if("$ref"in i)U(e,i,r,n,s);else if(Array.isArray(i)){const t=[];e.children=t;for(const[a,o]of i.entries()){const i=W(o,e,r+1,[...n,"items",a],s);void 0!==i&&t.push(i)}}else{switch(w(i)){case exports.SchemaKind.Object:return B(e,i,r,[...n,"items"],s);case exports.SchemaKind.Array:return z(e,i,r,[...n,"items"],s);default:E(i)&&(e.children=[],W(i,e,r,[...n,"items"],s))}}return e}function B(e,t,r,n,s){const i=[];if(l.isObject(t.properties)){e.children=i;for(const[a,o]of Object.entries(t.properties)){const t=W(o,e,r+1,[...n,"properties",a],s);void 0!==t&&i.push(t)}}if(l.isObject(t.patternProperties)){e.children=i;for(const[a,o]of Object.entries(t.patternProperties)){const t=W(o,e,r+1,[...n,"patternProperties",a],s);void 0!==t&&i.push(t)}}return e}function U(e,t,r,n,s){e.children=[];try{const r=_(t,n,s);if(l.isObject(r)&&"string"==typeof r.title){const{schemaNode:t}=O(e);t.title=r.title}}catch(e){}}function H(e,t,r,n,s){if(Array.isArray(t.allOf))for(const[i,a]of t.allOf.entries())W(a,e,r,[...n,i],s)}function _(e,t,r){if(!(l.isObject(e)&&null!==r&&"$ref"in e&&"string"==typeof e.$ref))return e;const n=r.resolveRef(t,e.$ref);return l.isObject(n)?n:e}function Q(e,t,r,n){if(null===n||!n.shouldResolveEagerly)return e;try{return _(e,r,n)}catch(e){return t.children=[],void t.children.push(N(t,e.message))}}class X extends n.Tree{constructor(e,t,r){super({expanded:e=>!(e.id in t.expanded)&&X.getLevel(e)<=r.expandedDepth||!0===t.expanded[e.id]}),this.schema=e,this.state=t,this.visited=new WeakSet,this.resolveRef=(e,t)=>{const r=o.extractSourceFromRef(t),n=o.extractPointerFromRef(t);if(void 0!==this.treeOptions.resolveRef)return this.treeOptions.resolveRef({source:r,pointer:n},e,this.schema);if(null!==r)throw new h("Cannot dereference external references");if(null===n)throw new h("The pointer is empty");return l.get(this.schema,o.pointerToPath(n))},this.treeOptions=r}populate(){var e,t;const r={};W(this.schema,this.root,0,[],{mergeAllOf:this.treeOptions.mergeAllOf,onNode:(e,t,s,i)=>{!this.treeOptions.shouldResolveEagerly&&(y(t)&&null!==t.$ref||g(t)&&null!==t.items.$ref)&&(r[t.id]=!1);const a=n.Tree.getLevel(s)>=0?O(s):void 0;return(void 0===a||!y(a.schemaNode))&&i<=this.treeOptions.expandedDepth+1},resolveRef:this.resolveRef,shouldResolveEagerly:this.treeOptions.shouldResolveEagerly}),this.state.expanded=r,this.invalidate(),null===(t=(e=this.treeOptions).onPopulate)||void 0===t||t.call(e,this,this.root)}populateTreeFragment(e,t,r,s){var i,a;const o=n.Tree.getLevel(e),l=n.Tree.createArtificialRoot();if(W(t,l,o,r,{mergeAllOf:this.treeOptions.mergeAllOf,onNode:(e,t,r,n)=>n<=this.treeOptions.expandedDepth||n<=o||s&&n<=o+1&&(e=>{if(E(e))return!0;const t=w(e);return t===exports.SchemaKind.Array||t===exports.SchemaKind.Object})(O(r).schema),resolveRef:this.resolveRef,shouldResolveEagerly:this.treeOptions.shouldResolveEagerly}),0===l.children.length)throw new Error(`Could not expand node ${r.join(".")}`);this.insertTreeFragment(s?this.stepIn(l,e):l.children,e),null===(a=(i=this.treeOptions).onPopulate)||void 0===a||a.call(i,this,e)}insertErrorNode(e,t){this.insertNode(N(e,t),e)}stepIn(e,t){return e.children.length>0&&"children"in e.children[0]&&l.isEqual(O(t).path,O(e.children[0]).path)?e.children[0].children:e.children}unwrap(e){if(0!==e.children.length||this.visited.has(e))return super.unwrap(e);const t=O(e),{path:r,schemaNode:n,schema:s}=t;try{if(y(n)||g(n))if(y(n))this.populateRefFragment(e,r,n.$ref);else{if(!g(n))throw new Error(`I do know not how to expand this node ${r.join(".")}`);this.populateRefFragment(e,[...r,"items"],n.items.$ref)}else this.populateTreeFragment(e,s,r,!0)}catch(t){this.insertErrorNode(e,t.message)}return this.visited.add(e),super.unwrap(e)}populateRefFragment(e,t,r){if(null===r)throw new Error("Unknown $ref value");const n=this.resolveRef(t,r);if(!l.isObject(n))throw new h(`Could not dereference "${r}"`);this.populateTreeFragment(e,n,t,!1)}}const Y=["allOf","oneOf","anyOf"],Z=e=>{if("object"!=typeof e||null===e)return!0;const t=Object.keys(e);return!(1!==t.length||(r=t[0],!Y.includes(r)))&&l.isEmpty(l.get(e,t[0],[]));var r},ee=({style:e,size:t,isExpanded:r})=>a.createElement("span",{className:"absolute flex justify-center cursor-pointer p-1 rounded hover:bg-darken-3",role:"button",style:e},a.createElement(d.Icon,{iconSize:t,icon:r?"caret-down":"caret-right",className:"text-darken-9 dark:text-lighten-7"})),te=({value:e})=>a.createElement(d.Popover,{boundary:"window",interactionKind:"hover",className:"ml-2 flex-1 truncate flex items-baseline",target:a.createElement("div",{className:"text-darken-7 dark:text-lighten-7 w-full truncate"},e),targetClassName:"text-darken-7 dark:text-lighten-6 w-full truncate",content:a.createElement("div",{className:"p-5",style:{maxHeight:500,maxWidth:400}},a.createElement(p.MarkdownViewer,{markdown:e}))}),re={allOf:"and",anyOf:"and/or",oneOf:"or"},ne=({kind:e})=>a.createElement("div",{className:"flex items-center w-full absolute",style:{top:-9,height:1}},a.createElement("div",{className:"text-darken-7 dark:text-lighten-8 uppercase text-xs pr-2 -ml-4"},re[e]),a.createElement("div",{className:"flex-1 bg-darken-5 dark:bg-lighten-5",style:{height:1}}));function se(e){return e===exports.SchemaKind.Array||e===exports.SchemaKind.Object||"$ref"===e}function ie(e,t,r){return e===exports.SchemaKind.Array?function(e,t){return e?Array.isArray(e)?`${exports.SchemaKind.Array}[${e.join(",")}]`:t&&se(e)?`${t}[]`:e!==exports.SchemaKind.Array&&"$ref"!==e?`${exports.SchemaKind.Array}[${e}]`:exports.SchemaKind.Array:exports.SchemaKind.Array}(t,r):r&&se(e)?r:e}const ae=({className:e,title:t,type:r,subtype:n})=>a.createElement("span",{className:s(e,le[r],"truncate")},ie(r,n,t));ae.displayName="JsonSchemaViewer.Type";const oe=({className:e,title:t,type:r,subtype:n})=>void 0===r?null:Array.isArray(r)?a.createElement("div",{className:s(e,"truncate")},a.createElement(a.Fragment,null,r.map((e,r,{length:s})=>a.createElement(a.Fragment,{key:r},a.createElement(ae,{key:r,type:e,subtype:n,title:t}),r<s-1&&a.createElement("span",{key:`${r}-sep`,className:"text-darken-7 dark:text-lighten-6"}," or "))))):a.createElement(ae,{className:e,type:r,subtype:n,title:t});oe.displayName="JsonSchemaViewer.Types";const le={object:"text-blue-6 dark:text-blue-4",any:"text-blue-5",array:"text-green-6 dark:text-green-4",allOf:"text-orange-5",anyOf:"text-orange-5",oneOf:"text-orange-5",null:"text-orange-5",integer:"text-red-7 dark:text-red-6",number:"text-red-7 dark:text-red-6",boolean:"text-red-4",binary:"text-green-4",string:"text-green-7 dark:text-green-5",$ref:"text-purple-6 dark:text-purple-4"};function ce(e){return l.isObject(e)?l.size(e):null}function de(e){return y(e)&&null!==e.$ref?e.$ref:g(e)&&null!==e.items.$ref?`$ref(${e.items.$ref})`:void 0}const pe=({node:e,onGoToRef:t})=>{const{path:r,schemaNode:n}=O(e),s=y(n)?"$ref":x(n)?n.combiner:n.type,i=f(n)?g(n)?"$ref":S(n.items):void 0,l=function(e){return f(e)?Array.isArray(e.items)||!e.items.title?de(e):e.items.title:e.title||de(e)}(n),c=a.useMemo(()=>s===exports.SchemaKind.Object||Array.isArray(s)&&s.includes(exports.SchemaKind.Object)?ce(n.properties):i===exports.SchemaKind.Object?ce(n.items.properties):i===exports.SchemaKind.Array?ce(n.items):null,[n]),d=a.useCallback(()=>{t&&y(n)&&null!==n.$ref&&t(n.$ref,n)},[t,n]);return a.createElement(a.Fragment,null,r.length>0&&function(e){if(null===e.parent)return!1;try{const{schemaNode:t}=O(e.parent);if(!("type"in t))return!1;let r=w(t);return r===exports.SchemaKind.Array&&t.items&&(r=w(t.items)),r===exports.SchemaKind.Object}catch(e){return!1}}(e)&&a.createElement("div",{className:"mr-2"},r[r.length-1]),a.createElement(oe,{type:s,subtype:i,title:l}),t&&(y(p=n)&&null!==p.$ref&&!o.isLocalRef(p.$ref))?a.createElement("a",{role:"button",className:"text-blue-4 ml-2",onClick:d},"(go to ref)"):null,null!==c&&a.createElement("div",{className:"ml-2 text-darken-7 dark:text-lighten-7"},`{${c}}`),r.length>1&&"patternProperties"===r[r.length-2]?a.createElement("div",{className:"ml-2 text-darken-7 dark:text-lighten-7 truncate"},"(pattern property)"):null);var p},me=e=>{var{required:t}=e,r=e.validations,{deprecated:n}=r,i=m(r,["deprecated"]);const l=Object.keys(i).length,c=a.createElement("div",{className:s("ml-2",t?"font-medium":"text-darken-7 dark:text-lighten-6")},t?"required":"optional",l?`+${l}`:"");return a.createElement(a.Fragment,null,n?a.createElement("span",{className:"ml-2 text-orange-7 dark:text-orange-6"},"deprecated"):null,l?a.createElement(d.Popover,{boundary:"window",interactionKind:"hover",content:a.createElement("div",{className:"p-5",style:{maxHeight:500,maxWidth:400}},Object.keys(i).map((e,t)=>{const r=i[e];let n=null;return n=Array.isArray(r)?r.map((e,t)=>a.createElement("div",{key:t,className:"mt-1 mr-1 flex items-center"},a.createElement("div",{className:"px-1 bg-gray-2 dark:bg-gray-8 font-bold text-sm rounded"},String(e)),t<r.length-1?a.createElement("div",null,","):null)):"object"==typeof r?a.createElement("div",{className:"m-1 px-1 bg-gray-2 dark:bg-gray-8 font-bold text-sm rounded",key:t},"{...}"):a.createElement("div",{className:"m-1 px-1 bg-gray-2 dark:bg-gray-8 font-bold text-sm rounded",key:t},"string"==typeof r?`"${r}"`:o.safeStringify(r)),a.createElement("div",{key:t,className:"py-1 flex items-baseline"},a.createElement("div",{className:"font-medium pr-2"},e,":"),a.createElement("div",{className:"flex-1 flex flex-wrap justify-end"},n))})),target:c}):c)};function ue(e){if(null===e.parent)return!1;try{const{path:t}=O(e);if(0===t.length)return!1;const{schema:r}=O(e.parent);return w(r)===exports.SchemaKind.Object&&Array.isArray(r.required)&&r.required.includes(String(t[t.length-1]))}catch(e){return!1}}const he=({node:e,onGoToRef:t,rowOptions:r})=>{var s;const i=O(e),{schemaNode:o}=i,l=null!==e.parent&&n.Tree.getLevel(e.parent)>=0&&(null===(s=O(e.parent))||void 0===s?void 0:s.schemaNode)||null,c="annotations"in o?o.annotations.description:null,d=y(o)||w(o)===exports.SchemaKind.Array&&g(o);return a.createElement(a.Fragment,null,d||n.isParentNode(e)&&n.Tree.getLevel(e)>0?a.createElement(ee,{isExpanded:!!r.isExpanded,style:Object.assign({width:20,height:20},d&&0===n.Tree.getLevel(e)?{position:"relative"}:{left:-23.5}),size:12}):null,null!==e.parent&&e.parent.children.length>0&&null!==l&&"combiner"in l&&e.parent.children[0]!==e&&a.createElement(ne,{kind:l.combiner}),a.createElement("div",{className:"flex-1 flex truncate"},a.createElement(pe,{node:e,onGoToRef:t}),c&&a.createElement(te,{value:c})),a.createElement(me,{required:ue(e),validations:Object.assign(Object.assign({},"annotations"in o&&o.annotations.default&&{default:o.annotations.default}),"validations"in o&&o.validations)}))};he.displayName="JsonSchemaViewer.SchemaPropertyRow";const fe=({message:e})=>a.createElement("span",{className:"text-red-5 dark:text-red-4"},e);fe.displayName="JsonSchemaViewer.SchemaErrorRow";const ye=({className:e,node:t,rowOptions:r,onGoToRef:i})=>{const o=b(t);return a.createElement("div",{className:s("px-2 flex-1 w-full",e)},a.createElement("div",{className:"flex items-center text-sm relative",style:{marginLeft:20*n.Tree.getLevel(t)}},"schema"in o?a.createElement(he,{node:t,onGoToRef:i,rowOptions:r}):a.createElement(fe,{message:o.error})))};ye.displayName="JsonSchemaViewer.SchemaRow";const ge=()=>!1,xe=c.observer(e=>{const{hideTopBar:t,name:r,treeStore:s,maxRows:i,onGoToRef:o,rowRenderer:l}=e;a.useEffect(()=>(s.events.on(n.TreeListEvents.NodeClick,(e,t)=>{"children"in t&&s.toggleExpand(t)}),()=>{s.dispose()}),[s]);const c=a.useCallback((e,t)=>void 0!==l?l(e,t,s):a.createElement(ye,{node:e,rowOptions:t,onGoToRef:o}),[o,l,s]);return a.createElement(a.Fragment,null,r&&!t&&a.createElement("div",{className:"flex items-center text-sm px-2 font-semibold",style:{height:30}},r),a.createElement(n.TreeList,{striped:!0,maxRows:void 0!==i?i+.5:i,store:s,rowRenderer:c,canDrag:ge}))});xe.displayName="JsonSchemaViewer.SchemaTree";class ve extends a.PureComponent{constructor(e){super(e),this.treeState=new n.TreeState,this.tree=new X(e.schema,this.treeState,this.treeOptions),this.treeStore=new n.TreeStore(this.tree,this.treeState,{defaultExpandedDepth:this.expandedDepth})}get treeOptions(){return{expandedDepth:this.expandedDepth,mergeAllOf:this.mergeAllOf,resolveRef:this.props.resolveRef,shouldResolveEagerly:!!this.props.shouldResolveEagerly,onPopulate:this.props.onTreePopulate}}get mergeAllOf(){return!1!==this.props.mergeAllOf}get expandedDepth(){return this.props.expanded?1/0:void 0!==this.props.defaultExpandedDepth?this.props.defaultExpandedDepth:1}renderSchema(){this.tree.count>0&&this.tree.setRoot(n.Tree.createArtificialRoot()),this.tree.populate()}componentDidMount(){this.renderSchema()}componentDidUpdate(e){e.resolveRef!==this.props.resolveRef&&(this.tree.treeOptions.resolveRef=this.props.resolveRef),e.onTreePopulate!==this.props.onTreePopulate&&(this.tree.treeOptions.onPopulate=this.props.onTreePopulate),this.treeStore.defaultExpandedDepth===this.expandedDepth&&e.schema===this.props.schema&&e.mergeAllOf===this.props.mergeAllOf&&e.shouldResolveEagerly===this.props.shouldResolveEagerly||(this.treeStore.defaultExpandedDepth=this.expandedDepth,this.tree.treeOptions=this.treeOptions,this.tree.schema=this.props.schema,this.renderSchema())}render(){const e=this.props,{emptyText:t="No schema defined",name:r,schema:n,expanded:i,defaultExpandedDepth:o,className:l}=e,c=m(e,["emptyText","name","schema","expanded","defaultExpandedDepth","className"]);return Z(n)?a.createElement("div",null,t):a.createElement("div",{className:s(l,"JsonSchemaViewer flex flex-col relative")},a.createElement(xe,Object.assign({expanded:i,name:r,schema:n,treeStore:this.treeStore},c)))}}!function(e,t,r,n){var s,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);i>3&&a&&Object.defineProperty(t,r,a)}([i.action,u("design:type",Function),u("design:paramtypes",[Object]),u("design:returntype",void 0)],ve.prototype,"componentDidUpdate",null);const be=r.withErrorBoundary(ve,{FallbackComponent:({error:e})=>a.createElement("div",{className:"p-4"},a.createElement("b",{className:"text-danger"},"Error"),e&&`: ${e.message}`),recoverableProps:["schema"],reportErrors:!1});Object.defineProperty(exports,"SchemaTreeState",{enumerable:!0,get:function(){return n.TreeState}}),exports.JsonSchemaViewer=be,exports.PropertyTypeColors=le,exports.ResolvingError=h,exports.SchemaRow=ye,exports.SchemaTree=X,exports.SchemaTreeComponent=xe,exports.getNodeMetadata=b;
//# sourceMappingURL=index.cjs.js.map
